"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[802],{38802:function(e,r,t){t.r(r);var n=t(1413),a=t(74165),s=t(15861),i=t(29439),l=t(47313),o=t(16157),c=t(10679),u=t(73477),d=t(58467),h=t(2517),p=t(66382),f=t(71235),m=t(5448),x=t(67881),Z=t(20780),b=t(21551),v=t(11397),g=t(64164),j=t(82937),w=t(75627),C=t(16970),k=t(74897),y=t(81962),S=t(51997),N=t(46417),I=(0,g.ZP)(u.Z)((function(e){var r=e.theme;return{borderRadius:24,boxShadow:r.shadows[5],textTransform:"none",padding:"10px 20px","&:hover":{backgroundColor:r.palette.primary.dark}}})),A=(0,g.ZP)(h.Z)((function(e){var r=e.theme;return{"& .MuiDialog-paper":{borderRadius:16,boxShadow:r.shadows[24],padding:r.spacing(2),width:"500px"}}})),P=(0,g.ZP)(x.Z)((function(e){return{marginBottom:e.theme.spacing(2)}}));r.default=function(){var e=localStorage.getItem("easyMedication_token"),r={Authorization:"Bearer ".concat(e)},t=(0,l.useState)(!0),x=(0,i.Z)(t,2),g=(x[0],x[1]),T=(0,l.useState)(!1),z=(0,i.Z)(T,2),D=z[0],_=z[1],E=((0,d.s0)(),(0,l.useState)(!1)),B=(0,i.Z)(E,2),U=B[0],W=B[1],Q=(0,l.useState)([]),R=(0,i.Z)(Q,2),M=R[0],H=R[1],V=(0,l.useState)([]),F=(0,i.Z)(V,2),G=F[0],O=F[1],Y=(0,l.useState)(""),q=(0,i.Z)(Y,2),J=q[0],K=q[1],L=(0,l.useState)(""),X=(0,i.Z)(L,2),$=X[0],ee=X[1],re=(0,l.useState)(""),te=(0,i.Z)(re,2),ne=te[0],ae=te[1],se=(0,l.useState)(!1),ie=(0,i.Z)(se,2),le=ie[0],oe=ie[1],ce=(0,l.useState)(!1),ue=(0,i.Z)(ce,2),de=ue[0],he=ue[1],pe=(0,l.useState)(!1),fe=(0,i.Z)(pe,2),me=fe[0],xe=fe[1],Ze=(0,l.useState)(null),be=(0,i.Z)(Ze,2),ve=be[0],ge=be[1],je={id:"",practiceId:"",userName:"",emailAddress:"",userType:"",password:""},we=["id","practiceId","userName","emailAddress","userType","password"],Ce=(0,w.cI)({defaultValues:je}),ke=Ce.control,ye=Ce.setValue,Se=Ce.getValues,Ne=Ce.reset,Ie=((0,l.useMemo)((function(){return{flex:1,minWidth:100,filter:!0,sortable:!0,resizable:!0}}),[]),(0,l.useState)(!1)),Ae=(0,i.Z)(Ie,2),Pe=Ae[0],Te=Ae[1],ze=(0,l.useCallback)((0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Pe){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,g(!0),e.next=6,v.Z.get("".concat("https://apis.scbatchbilling.com","/users/getAllUsers"),{headers:r});case 6:t=e.sent,O(t.data),Te(!0),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(2),console.error("There was an error!",e.t0);case 14:return e.prev=14,g(!1),e.finish(14);case 17:case"end":return e.stop()}}),e,null,[[2,11,14,17]])}))),[r,Pe]);(0,l.useEffect)((function(){ze()}),[ze,D]),(0,l.useEffect)((function(){if(le){var e=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t,n,s;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,g(!0),e.next=4,v.Z.get("".concat("https://apis.scbatchbilling.com","/practice/getAllPractice"),{headers:r});case 4:t=e.sent,Number(ne),n=t.data,s=n.map((function(e){return{label:e.name,value:e.id}})),H(s),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("There was an error!",e.t0);case 14:return e.prev=14,g(!1),oe(!1),e.finish(14);case 18:case"end":return e.stop()}}),e,null,[[0,11,14,18]])})));return function(){return e.apply(this,arguments)}}();e()}}),[le,r,ne,$]),(0,l.useEffect)((function(){oe(!0)}),[$]);var De=(0,l.useCallback)((function(e){K(e),W(!0),v.Z.post("".concat("https://apis.scbatchbilling.com","/users/userById"),{Id:[e]},{headers:r}).then((function(e){var r=e.data[0];we.forEach((function(e){r[e]?ye(e,r[e]):ye(e,"")})),ee(r.userType),ae(r.practiceId),oe(!0)})).catch((function(e){console.error("Error fetching data:",e)}))}),[we,r,ye]),_e=(0,l.useMemo)((function(){return[{field:"id",headerName:"ID",width:90,flex:.1,headerClassName:"super-app-theme--header"},{field:"userName",headerName:"User Name",headerClassName:"super-app-theme--header",flex:.2,renderCell:function(e){return(0,N.jsx)(u.Z,{style:{color:"rgba(58, 53, 65, 0.87)",display:"flex",justifyContent:"flex-start"},size:"small",variant:"text",color:"info",onClick:function(){return De(e.row.id)},children:e.row.userName})}},{field:"emailAddress",headerName:"Email Address",headerClassName:"super-app-theme--header",flex:.3},{field:"userType",headerName:"User Type",headerClassName:"super-app-theme--header",flex:.2},{field:"delete",headerName:"Delete",sortable:!1,headerClassName:"super-app-theme--header",renderCell:function(e){return(0,N.jsx)(S.Z,{style:{cursor:"pointer"},onClick:function(){ge(e.id),xe(!0)}})}}]}),[De]),Ee=(0,l.useCallback)((function(){Ne({id:"",practiceId:"",userName:"",emailAddress:"",userType:"",password:""}),W(!0),Ne(je)}),[Ne]),Be=function(){var e=(0,s.Z)((0,a.Z)().mark((function e(){var t;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Delete row with ID:",ve),e.prev=1,e.next=4,v.Z.delete("".concat("https://apis.scbatchbilling.com","/users/deleteUserById/").concat(ve),{headers:r});case 4:200===e.sent.status&&(t=G.filter((function(e){return e.id!==ve})),O(t),ge(null),xe(!1)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error("Error deleting data:",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(){return e.apply(this,arguments)}}(),Ue=(0,l.useCallback)((function(){W(!1),xe(!1)}),[]),We=(0,l.useCallback)((function(){Ne(je),W(!1),oe(!1)}),[Ne,je]),Qe=(0,l.useCallback)((function(){var e=Se();e.id=J,v.Z.post("".concat("https://apis.scbatchbilling.com","/users/addUsers"),e,{headers:r}).then((function(){_((function(e){return!e})),We()})).catch((function(e){console.error("There was an error!",e)}))}),[Se,J,r,We]);return(0,N.jsx)(o.Z,{children:(0,N.jsxs)(c.Z,{children:[(0,N.jsx)(o.Z,{mt:3,children:(0,N.jsx)(I,{onClick:Ee,variant:"contained",color:"primary",children:"Add New"})}),(0,N.jsx)(o.Z,{mt:2,children:(0,N.jsx)("div",{style:{height:450,width:"100%"},children:G&&G.length>0&&(0,N.jsx)(Z._,{rows:G,headerHeight:37,columns:_e,getRowId:function(e){return null!=e?e.id:0},sx:{boxShadow:2,border:2,background:"white",fontSize:"13.6px !important",color:"black !important",borderColor:"rgba(5, 152, 236, 0.637) !important","& .MuiDataGrid-cell:hover":{color:"rgba(5, 152, 236, 0.637) !important",fontSize:"14.6px !important"},"& .super-app-theme--header":{backgroundColor:"#A574FD",color:"white"}},disableSelectionOnClick:!0,components:{Toolbar:b.n}})})}),(0,N.jsxs)(A,{open:U,onClose:We,children:[(0,N.jsx)(m.Z,{children:"Demographic"}),(0,N.jsx)(f.Z,{children:(0,N.jsxs)(j.ZP,{container:!0,spacing:2,children:[(0,N.jsxs)(j.ZP,{item:!0,xs:12,children:[(0,N.jsx)("div",{style:{marginTop:5}}),(0,N.jsx)(w.Qr,{name:"userName",control:ke,render:function(e){var r=e.field;return(0,N.jsx)(P,(0,n.Z)((0,n.Z)({label:"User Name",size:"small"},r),{},{fullWidth:!0}))}})]}),(0,N.jsx)(j.ZP,{item:!0,xs:12,children:(0,N.jsx)(w.Qr,{name:"userType",control:ke,render:function(e){var r=e.field;return(0,N.jsxs)(k.Z,(0,n.Z)((0,n.Z)({label:"User Type",size:"small"},r),{},{fullWidth:!0,value:r.value||"",onChange:function(e){var t=e.target.value;r.onChange(t),ee(t)},children:[(0,N.jsx)(y.Z,{value:"Super Admin",children:"Super Admin"}),(0,N.jsx)(y.Z,{value:"Billing Rep",children:"Billing Rep"})]}))}})}),(0,N.jsx)(j.ZP,{item:!0,xs:12,children:(0,N.jsx)(w.Qr,{name:"emailAddress",control:ke,render:function(e){var r=e.field;return(0,N.jsx)(P,(0,n.Z)((0,n.Z)({label:"Email Address",size:"small"},r),{},{fullWidth:!0}))}})}),(0,N.jsx)(j.ZP,{item:!0,xs:12,children:(0,N.jsx)(w.Qr,{name:"password",control:ke,render:function(e){var r=e.field;return(0,N.jsx)(P,(0,n.Z)((0,n.Z)({label:"Password",size:"small",type:de?"text":"password"},r),{},{fullWidth:!0,InputProps:{endAdornment:(0,N.jsx)(u.Z,{onClick:function(){return he((function(e){return!e}))},size:"small",children:de?"Hide":"Show"})}}))}})}),(0,N.jsx)(j.ZP,{item:!0,xs:12,children:(0,N.jsx)(w.Qr,{name:"practiceId",control:ke,render:function(e){var r=e.field;return(0,N.jsx)(C.ZP,(0,n.Z)((0,n.Z)({},r),{},{value:M.find((function(e){return e.value===r.value})),onChange:function(e){return ye("practiceId",e?e.value:"")},options:M,placeholder:"Select Practice",menuPortalTarget:document.body,fullWidth:!0,styles:{menu:function(e){return(0,n.Z)((0,n.Z)({},e),{},{maxHeight:"200px",overflowY:"auto",zIndex:9999})},menuPortal:function(e){return(0,n.Z)((0,n.Z)({},e),{},{zIndex:9999})}}}))}})})]})}),(0,N.jsxs)(p.Z,{children:[(0,N.jsx)(u.Z,{onClick:We,children:"Cancel"}),(0,N.jsx)(u.Z,{onClick:Qe,children:"Save"})]})]}),(0,N.jsxs)(h.Z,{open:me,onClose:Ue,children:[(0,N.jsx)(m.Z,{children:"Confirm Deletion"}),(0,N.jsx)(f.Z,{children:"Are you sure you want to delete this user?"}),(0,N.jsxs)(p.Z,{children:[(0,N.jsx)(u.Z,{onClick:Ue,color:"primary",children:"Cancel"}),(0,N.jsx)(u.Z,{onClick:Be,color:"primary",children:"Delete"})]})]})]})})}}}]);