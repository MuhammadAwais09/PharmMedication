"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[477],{98477:function(e,a,t){t.r(a);var n=t(1413),r=t(74165),i=t(15861),l=t(29439),o=t(47313),c=t(58467),s=t(73477),d=t(16157),p=t(51930),u=t(51987),h=t(82937),m=t(10679),f=t(42669),x=t(20780),g=t(21551),v=t(11397),b=t(75627),Z=t(64164),w=t(16970),S=t(46417);a.default=function(){(0,c.s0)();var e=(0,b.cI)(),a=e.control,t=e.setValue,j=(0,o.useState)(!0),C=(0,l.Z)(j,2),k=C[0],y=C[1],N=(0,o.useState)(!1),I=(0,l.Z)(N,2),B=I[0],D=I[1],P=(0,o.useState)([]),_=(0,l.Z)(P,2),z=(_[0],_[1]),T=(0,o.useState)([]),A=(0,l.Z)(T,2),R=A[0],F=A[1],U=(0,o.useState)([]),E=(0,l.Z)(U,2),L=E[0],O=E[1],M=(0,o.useState)(""),W=(0,l.Z)(M,2),G=W[0],Q=W[1],V=(0,o.useState)(!1),q=(0,l.Z)(V,2),H=q[0],J=q[1],K=(0,o.useState)(null),X=(0,l.Z)(K,2),Y=X[0],$=X[1],ee=(0,o.useState)(0),ae=(0,l.Z)(ee,2),te=ae[0],ne=ae[1],re=(0,o.useState)(""),ie=(0,l.Z)(re,2),le=ie[0],oe=(ie[1],(0,o.useState)("off")),ce=(0,l.Z)(oe,2),se=ce[0],de=(ce[1],"Bearer ".concat(localStorage.getItem("easyMedication_token"))),pe=localStorage.getItem("UserName"),ue=localStorage.getItem("userType"),he=localStorage.getItem("PracticeId"),me={Authorization:de},fe=(0,Z.ZP)(s.Z)((function(e){var a=e.theme;return{borderRadius:24,boxShadow:a.shadows[5],textTransform:"none",padding:"10px 20px","&:hover":{backgroundColor:a.palette.primary.dark}}})),xe=(0,o.useMemo)((function(){return{flex:1,minWidth:100,sortable:!0,resizable:!0}}),[]);(0,o.useEffect)((function(){if(H){var e=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var a,t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,y(!0),e.next=4,v.Z.get("".concat("https://apis.scbatchbilling.com","/practice/getAllPractice"),{headers:me});case 4:a=e.sent,t=a.data,"Billing Rep"===ue&&(t=t.filter((function(e){return e.id===parseInt(he)}))),n=t.map((function(e){return{label:e.name,value:e.id}})),O(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("There was an error!",e.t0);case 14:return e.prev=14,y(!1),J(!1),e.finish(14);case 18:case"end":return e.stop()}}),e,null,[[0,11,14,18]])})));return function(){return e.apply(this,arguments)}}();e()}}),[H,me]),(0,o.useEffect)((function(){"Billing Rep"===le?O([]):J(!0)}),[le]),(0,o.useEffect)((function(){if(G){var e=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var a,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a={"Content-Type":"application/json",Authorization:de},e.next=4,v.Z.get("".concat("https://apis.scbatchbilling.com","/claims/getAllClaimsLogs"),{headers:a,params:{practiceId:G}});case 4:t=e.sent,z(t.data),F(t.data),y(!1),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching claims logs:",e.t0),y(!1);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();e()}else z([])}),[G,B,de]);var ge=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var a,t,n,i,l,o,c,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=0,!Y){e.next=28;break}return(t=new FormData).append("file",Y),t.append("medicaidCheckBox",se),t.append("submit","submit"),t.append("practiceId",G),e.prev=7,e.next=10,v.Z.post("".concat("https://apis.scbatchbilling.com","/practice/generatePracticeFile"),t,{headers:{Authorization:de}});case 10:if(l=e.sent,null!==(n=l.data)&&void 0!==n&&n.totalRows&&(a=l.data.totalRows),null===(i=l.data)||void 0===i||!i.generatedData){e.next=23;break}return o=new Blob([l.data.generatedData],{type:"text/plain"}),(c=document.createElement("a")).href=URL.createObjectURL(o),c.download="SCBatchBilling_.txt",c.click(),s={uploadedBy:pe,filename:Y.name,filetype:Y.type,noOfClaims:a,uploadTime:(new Date).toISOString(),practiceId:G},e.next=21,v.Z.post("".concat("https://apis.scbatchbilling.com","/claims/addClaimsLogs"),s,{headers:{Authorization:de}});case 21:$(null),D(!B);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(7),console.error("Upload or log error:",e.t0);case 28:case"end":return e.stop()}}),e,null,[[7,25]])})));return function(){return e.apply(this,arguments)}}(),ve=function(){var e=document.createElement("a");e.href="".concat("/free","/sample/sample.xlsx"),e.download="samplefile.xlsx",e.click()};return(0,S.jsxs)(d.Z,{children:[(0,S.jsxs)(p.Z,{value:te,onChange:function(e,a){return ne(a)},"aria-label":"Claim Tabs",children:[(0,S.jsx)(u.Z,{label:"New",value:0}),(0,S.jsx)(u.Z,{label:"Logs",value:1})]}),(0,S.jsxs)(h.ZP,{container:!0,spacing:2,mb:2,mt:2,children:[(0,S.jsx)(h.ZP,{item:!0,xs:2,children:(0,S.jsx)(b.Qr,{name:"practiceId",control:a,render:function(e){var a=e.field;return(0,S.jsx)(w.ZP,(0,n.Z)((0,n.Z)({},a),{},{value:L.find((function(e){return e.value===a.value})),onChange:function(e){t("practiceId",e?e.value:""),Q(e?e.value:"")},options:L,placeholder:"Select Practice",fullWidth:!0}))}})}),(0,S.jsx)(h.ZP,{item:!0,xs:4,sm:4,md:4,mt:-2,children:1===te?(0,S.jsx)(fe,{sx:{width:"80%",margin:2,height:40},variant:"contained",color:"primary",onClick:ve,disabled:!0,children:"Download Sample"}):(0,S.jsx)(fe,{sx:{width:"80%",margin:2,height:40},variant:"contained",color:"primary",onClick:ve,children:"Download Sample"})})]}),(0,S.jsx)(m.Z,{children:(0,S.jsx)(h.ZP,{container:!0,spacing:2,mb:2,children:0===te&&G&&(0,S.jsxs)(h.ZP,{item:!0,xs:12,sm:6,md:3,children:[(0,S.jsx)("input",{accept:"*",style:{display:"none"},id:"upload-file-input",type:"file",onChange:function(e){$(e.target.files[0])}}),(0,S.jsx)("label",{htmlFor:"upload-file-input",children:(0,S.jsx)(fe,{component:"span",sx:{width:"80%",margin:2,height:40},variant:"contained",color:"primary",children:"Convert File Now"})}),Y&&(0,S.jsxs)(d.Z,{mt:1,children:[(0,S.jsxs)(f.Z,{variant:"body2",children:["Selected file: ",Y.name]}),(0,S.jsx)(fe,{onClick:ge,variant:"contained",color:"secondary",children:"Upload File"})]})]})})}),1===te&&(0,S.jsx)(d.Z,{mt:2,children:(0,S.jsx)("div",{style:{height:400},children:k?(0,S.jsx)(f.Z,{variant:"h6",align:"center",children:"Loading..."}):0===R.length?(0,S.jsx)(f.Z,{variant:"h6",align:"center",children:"No Data Available"}):(0,S.jsx)(x._,{columns:[{field:"id",headerName:"ID",flex:.1,headerClassName:"super-app-theme--header"},{field:"uploadedBy",headerName:"Uploaded By",flex:.3,headerClassName:"super-app-theme--header"},{field:"uploadTime",headerName:"Upload Time",flex:.3,headerClassName:"super-app-theme--header"},{field:"filename",headerName:"File Name",flex:.3,headerClassName:"super-app-theme--header"},{field:"noOfClaims",headerName:"No. of claims",flex:.3,headerClassName:"super-app-theme--header"}],rows:R,components:{Toolbar:g.n},pageSize:10,getRowId:function(e){return e.id},sx:{boxShadow:2,border:2,background:"white",fontSize:"13.6px !important",color:"black !important",borderColor:"rgba(5, 152, 236, 0.637) !important","& .MuiDataGrid-cell:hover":{color:"rgba(5, 152, 236, 0.637) !important",fontSize:"14.6px !important"},"& .super-app-theme--header":{backgroundColor:"#A574FD",color:"white"}},disableSelectionOnClick:!0,initialState:{pagination:{paginationModel:{pageSize:10}}},defaultColDef:xe})})})]})}}}]);